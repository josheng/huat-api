# HUAT API

This Rails API was created to do the following:

* Scrap 4D Results and seed the data
* GET request to return latest result
* GET request to return date of all draws for the past two years
* POST request to check winning number and your prize winnings.

## Set Up

You will require the following to run this locally:

* Ruby 3.1.2
* Rails 7.0.4
* PostgreSQL 14.6
* Selenium chromedriver

Clone this git repo and run the following:

> bundle install
>
> rails db:create db:migrate db:seed
>
> rails s

The above command will do the following:

1. Install all required Gem
2. Create DB, Perform DB Migration and seed data.
3. Start rails server

## API

GET: Retrieve Latest Result

> /api/v1/4d/result
>
> Example Output
>{"id":1,"drawnumber":"4954","drawdate":"2022-12-28","first":"3395","second":"5553","third":"0350","starter":["0817","1698","1829","3198","7721","7934","8129","9205","9277","9774"],"consolation":["1221","2008","3173","3187","4987","5077","6112","6767","9178","9581"],"created_at":"2022-12-29T16:55:02.111Z","updated_at":"2022-12-29T16:55:02.111Z"}

POST: Check Winning Number

> /api/v1/4d/result
>
> Request body example:
>
>{"drawdate":"18/12/2022","number": ["5139","3115","4040","0184","0343"],"bet": [{"b": 1,"s": 2},{"b": 2,"s": 3},{"b": 3,"s": 4},{"b": 4,"s": 5},{"b": 5,"s": 6}]}
>
> Example output:
>
>{"id":5,"drawnumber":"4950","drawdate":"2022-12-18","first":"5139","second":"3115","third":"4040","starter":["0184","0349","0367","3593","6437","6967","7174","7894","8453","9420"],"consolation":["0343","2114","3502","5573","6184","6643","7781","9099","9462","9645"],"created_at":"2022-12-29T16:55:02.732Z","updated_at":"2022-12-29T16:55:02.732Z","winningnumber":["first: 5139, prize: 8000","second: 3115, prize: 8000","third: 4040, prize: 4670","starter: 0184, prize: 1000","consolation: 0343, prize: 300"],"totalwinnings":21970}

GET: Retrieve past 2 year draw dates

>/api/v1/4d/dates
>
>Example output:
>
>["2022-12-28","2022-12-25","2022-12-24","2022-12-21","2022-12-18","2022-12-17","2022-12-14","2022-12-11","2022-12-10","2022-12-07","2022-12-04","2022-12-03","2022-11-30","2022-11-27","2022-11-26","2022-11-23","2022-11-20","2022-11-19","2022-11-16","2022-11-13","2022-11-12","2022-11-09","2022-11-06","2022-11-05","2022-11-02","2022-10-30","2022-10-29","2022-10-26","2022-10-23","2022-10-22","2022-10-19","2022-10-16","2022-10-15","2022-10-12","2022-10-09","2022-10-08","2022-10-05","2022-10-02","2022-10-01","2022-09-28","2022-09-25","2022-09-24","2022-09-21","2022-09-18","2022-09-17","2022-09-14","2022-09-11","2022-09-10","2022-09-07","2022-09-04","2022-09-03","2022-08-31","2022-08-28","2022-08-27","2022-08-24","2022-08-21","2022-08-20","2022-08-17","2022-08-14","2022-08-13","2022-08-10","2022-08-07","2022-08-06","2022-08-03","2022-07-31","2022-07-30","2022-07-27","2022-07-24","2022-07-23","2022-07-20","2022-07-17","2022-07-16","2022-07-13","2022-07-10","2022-07-09","2022-07-06","2022-07-03","2022-07-02","2022-06-29","2022-06-26","2022-06-25","2022-06-22","2022-06-19","2022-06-18","2022-06-15","2022-06-12","2022-06-11","2022-06-08","2022-06-05","2022-06-04","2022-06-01","2022-05-29","2022-05-28","2022-05-25","2022-05-22","2022-05-21","2022-05-18","2022-05-15","2022-05-14","2022-05-11","2022-05-08","2022-05-07","2022-05-04","2022-05-01","2022-04-30","2022-04-27","2022-04-24","2022-04-23","2022-04-20","2022-04-17","2022-04-16","2022-04-13","2022-04-10","2022-04-09","2022-04-06","2022-04-03","2022-04-02","2022-03-30","2022-03-27","2022-03-26","2022-03-23","2022-03-20","2022-03-19","2022-03-16","2022-03-13","2022-03-12","2022-03-09","2022-03-06","2022-03-05","2022-03-02","2022-02-27","2022-02-26","2022-02-23","2022-02-20","2022-02-19","2022-02-16","2022-02-13","2022-02-12","2022-02-09","2022-02-06","2022-02-05","2022-02-02","2022-01-30","2022-01-29","2022-01-26","2022-01-23","2022-01-22","2022-01-19","2022-01-16","2022-01-15","2022-01-12","2022-01-09","2022-01-08","2022-01-05","2022-01-02","2022-01-01","2021-12-29","2021-12-26","2021-12-25","2021-12-22","2021-12-19","2021-12-18","2021-12-15","2021-12-12","2021-12-11","2021-12-08","2021-12-05","2021-12-04","2021-12-01","2021-11-28","2021-11-27","2021-11-24","2021-11-21","2021-11-20","2021-11-17","2021-11-14","2021-11-13","2021-11-10","2021-11-07","2021-11-06","2021-11-03","2021-10-31","2021-10-30","2021-10-27","2021-10-24","2021-10-23","2021-10-20","2021-10-17","2021-10-16","2021-10-13","2021-10-10","2021-10-09","2021-10-06","2021-10-03","2021-10-02","2021-09-29","2021-09-26","2021-09-25","2021-09-22","2021-09-19","2021-09-18","2021-09-15","2021-09-12","2021-09-11","2021-09-08","2021-09-05","2021-09-04","2021-09-01","2021-08-29","2021-08-28","2021-08-25","2021-08-22","2021-08-21","2021-08-18","2021-08-15","2021-08-14","2021-08-11","2021-08-08","2021-08-07","2021-08-04","2021-08-01","2021-07-31","2021-07-28","2021-07-25","2021-07-24","2021-07-21","2021-07-18","2021-07-17","2021-07-14","2021-07-11","2021-07-10","2021-07-07","2021-07-04","2021-07-03","2021-06-30","2021-06-27","2021-06-26","2021-06-23","2021-06-20","2021-06-19","2021-06-16","2021-06-13","2021-06-12","2021-06-09","2021-06-06","2021-06-05","2021-06-02","2021-05-30","2021-05-29","2021-05-26","2021-05-23","2021-05-22","2021-05-19","2021-05-16","2021-05-15","2021-05-12","2021-05-09","2021-05-08","2021-05-05","2021-05-02","2021-05-01","2021-04-28","2021-04-25","2021-04-24","2021-04-21","2021-04-18","2021-04-17","2021-04-14","2021-04-11","2021-04-10","2021-04-07","2021-04-04","2021-04-03","2021-03-31","2021-03-28","2021-03-27","2021-03-24","2021-03-21","2021-03-20","2021-03-17","2021-03-14","2021-03-13","2021-03-10","2021-03-07","2021-03-06","2021-03-03","2021-02-28","2021-02-27","2021-02-24","2021-02-21","2021-02-20","2021-02-17","2021-02-14","2021-02-13","2021-02-10","2021-02-07","2021-02-06","2021-02-03","2021-01-31","2021-01-30","2021-01-27","2021-01-24","2021-01-23","2021-01-20","2021-01-17","2021-01-16","2021-01-13","2021-01-10","2021-01-09","2021-01-06","2021-01-03","2021-01-02","2020-12-30","2020-12-27","2020-12-26","2020-12-23","2020-12-20","2020-12-19","2020-12-16","2020-12-13","2020-12-12","2020-12-09","2020-12-06","2020-12-05","2020-12-02","2020-11-29","2020-11-28","2020-11-25","2020-11-22","2020-11-21","2020-11-18","2020-11-15","2020-11-14","2020-11-11","2020-11-08","2020-11-07","2020-11-04","2020-11-01","2020-10-31","2020-10-28","2020-10-25","2020-10-24","2020-10-21","2020-10-18","2020-10-17","2020-10-14","2020-10-11","2020-10-10","2020-10-07","2020-10-04","2020-10-03","2020-09-30","2020-09-27","2020-09-26","2020-09-23","2020-09-20","2020-09-19","2020-09-16","2020-09-13","2020-09-12","2020-09-09","2020-09-06","2020-09-05","2020-09-02","2020-08-30","2020-08-29","2020-08-26","2020-08-23","2020-08-22","2020-08-19","2020-08-16","2020-08-15","2020-08-12","2020-08-09","2020-08-08","2020-08-05","2020-08-02","2020-08-01","2020-07-29","2020-07-26","2020-07-25","2020-07-22","2020-07-19","2020-07-18","2020-07-15","2020-07-12","2020-07-11","2020-07-08","2020-07-05","2020-07-04","2020-07-01","2020-06-28","2020-06-27","2020-06-24","2020-04-05","2020-04-04","2020-04-01","2020-03-29","2020-03-28","2020-03-25","2020-03-22","2020-03-21","2020-03-18","2020-03-15","2020-03-14","2020-03-11","2020-03-08","2020-03-07","2020-03-04","2020-03-01","2020-02-29","2020-02-26","2020-02-23","2020-02-22","2020-02-19","2020-02-16","2020-02-15","2020-02-12","2020-02-09","2020-02-08","2020-02-05","2020-02-02","2020-02-01","2020-01-29","2020-01-26","2020-01-25","2020-01-22","2020-01-19","2020-01-18","2020-01-15","2020-01-12","2020-01-11","2020-01-08","2020-01-05","2020-01-04","2020-01-01","2019-12-29"]
